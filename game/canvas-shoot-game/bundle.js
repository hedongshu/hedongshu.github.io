!function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}({0:function(e,t,s){"use strict";s.r(t);const i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/30)};var n={status:"start",level:1,totalLevel:6,numPerLine:6,canvasPadding:30,bulletSize:10,bulletSpeed:10,enemySpeed:2,enemySize:50,enemyGap:10,enemyIcon:"./img/enemy.png",enemyBoomIcon:"./img/boom.png",enemyDirection:"right",planeSpeed:5,planeSize:{width:60,height:100},planeIcon:"./img/plane.png"};class a{constructor(e){this.x=e.x,this.y=e.y,this.size=e.size,this.speed=e.speed}move(e,t){let s=e||0,i=t||0;this.x+=s,this.y+=i}draw(){}}class o extends a{constructor(e){super(e),this.status="normal",this.icon=e.icon,this.boomIcon=e.boomIcon,this.count=0}booming(){this.status="booming",this.count++,this.count>=3&&(this.status="died")}translate(e){let t="left"===e?-this.speed:this.speed;this.move(t,0)}down(){this.move(0,this.size)}draw(){switch(this.status){case"normal":m.drawImage(this.icon,this.x,this.y,this.size,this.size);break;case"booming":m.drawImage(this.boomIcon,this.x,this.y,this.size,this.size)}}}class l extends a{constructor(e){super(e)}up(){this.move(0,-this.speed)}draw(){m.fillStyle="#fff",m.fillRect(this.x,this.y,1,this.size)}crash(e){return!(e.x+e.size<this.x||this.x+1<e.x||e.y+e.size<this.y||this.y+this.size<e.y)}}s(8);s.d(t,"context",function(){return m});let r=document.getElementById("game"),h=document.querySelector(".game-level"),c=document.querySelector(".game-next-level");var u=document.querySelector(".game-info .score"),d=document.querySelector(".game-info-text .score");let p=document.getElementById("canvas"),m=p.getContext("2d"),y=p.clientWidth,f=p.clientHeight;({init:function(e){e=Object.assign({},e,n),this.opts=e;let t=this;this.status=this.opts.status||"start",h.innerText=`当前Level: ${e.level}`,this.score=0,this.Keyboard=new class{constructor(){document.addEventListener("keydown",e=>{this.keydown(e)}),document.addEventListener("keyup",e=>{this.keyup(e)}),this.pressLeft=!1,this.pressRight=!1,this.pressSpace=!1}keydown(e){switch(e.keyCode){case 37:this.pressLeft=!0,this.pressRight=!1;break;case 39:this.pressRight=!0,this.pressLeft=!1;break;case 32:this.pressSpace=!0}}keyup(e){switch(e.keyCode){case 37:this.pressLeft=!1;break;case 39:this.pressRight=!1;break;case 32:this.pressSpace=!1}}},function(e,t){let s=e.length,i=0,n=[];e.forEach(function(e,a){n[a]=new Image,n[a].src=e,n[a].onload=(()=>{++i===s&&t(n)})})}([e.enemyIcon,e.enemyBoomIcon,e.planeIcon],s=>{e.enemyIconImage=s[0],e.enemyBoomIconImage=s[1],e.planeIconImage=s[2],t.opts=e,this.bindEvent()})},bindEvent:function(){var e=this,t=document.querySelector(".js-play"),s=document.querySelectorAll(".js-replay"),i=document.querySelector(".js-next");t.onclick=function(){e.play()},s.forEach(function(t){t.onclick=function(){e.opts.level=1,e.play(),e.score=0,d.innerText=e.score}}),i.onclick=function(){e.opts.level+=1,e.play()}},setStatus:function(e){this.status=e,r.setAttribute("data-status",e)},play:function(){let e=this.opts,t=e.canvasPadding,s=e.level,i=e.numPerLine,n=(e.totalLevel,e.enemySize),r=e.enemySpeed,h=e.enemyGap,c=e.enemyIconImage,p=e.enemyBoomIconImage;this.enemys=[];for(let e=0;e<s;e++)for(let s=0;s<i;s++){let i={x:s*(n+h)+t,y:e*n+t,speed:r,icon:c,boomIcon:p,size:n};this.enemys.push(new o(i))}let g={x:(y-e.planeSize.width)/2,y:f-t-e.planeSize.height,speed:e.planeSpeed,size:e.planeSize,icon:e.planeIconImage,minX:e.canvasPadding,maxX:y-e.canvasPadding-e.planeSize.width,bulletSize:e.bulletSize,bulletSpeed:e.bulletSpeed};this.plane=new class extends a{constructor(e){super(e),this.icon=e.icon,this.minX=e.minX,this.maxX=e.maxX,this.bullets=[],this.bulletSize=e.bulletSize,this.bulletSpeed=e.bulletSpeed,this.lastShoot=Date.now()}shoot(){if(Date.now()-this.lastShoot>200){let e={x:this.x+this.size.width/2,y:this.y,size:this.bulletSize,speed:this.bulletSpeed};this.bullets.push(new l(e)),this.lastShoot=new Date}}translate(e){let t="left"===e?-this.speed:this.speed;this.move(t,0)}hasHit(e){let t=!1;for(let s=this.bullets.length-1;s>=0;s--)if(this.bullets[s].crash(e)){this.bullets.splice(s,1),t=!0;break}return t}drawBullets(){for(let e=this.bullets.length-1;e>=0;e--){let t=this.bullets[e];t.up(),t.y<=0-t.size?this.bullets.splice(e,1):t.draw()}}draw(){m.drawImage(this.icon,this.x,this.y,this.size.width,this.size.height),this.drawBullets()}}(g),u.innerText=this.score,d.innerText=this.score,this.setStatus("playing"),this.updata()},updata:function(){let e=this.opts,t=this.enemys,s=f-e.canvasPadding-e.planeSize.height;if(m.clearRect(0,0,y,f),this.updataEnemy(),this.updataPlane(),u.innerText=this.score,d.innerText=this.score,0!==t.length)t[t.length-1].y>=s?this.end("failed"):(this.draw(),i(()=>{this.updata()}));else{let t=e.level===e.totalLevel?"all-success":"success";this.end(t)}},updataPlane:function(){this.Keyboard.pressLeft&&this.plane.translate("left"),this.Keyboard.pressRight&&this.plane.translate("right"),this.Keyboard.pressSpace&&this.plane.shoot(),this.plane.x=Math.max(this.plane.x,this.opts.canvasPadding),this.plane.x=Math.min(this.plane.x,y-this.opts.canvasPadding-this.plane.size.width)},updataEnemy:function(){let e=this.enemys,t=this.opts,s=t.canvasPadding,i=y-s-t.enemySize,n=function(e){let t=null,s=null;return e.forEach(e=>{t=t||e.x,s=s||e.x,t=e.x>t?e.x:t,s=e.x<s?e.x:s}),{max:t,min:s}}(e),a=!1;(n.min<s||n.max>i)&&(t.enemyDirection="left"===t.enemyDirection?"right":"left",a=!0);for(let s=e.length-1;s>=0;s--){let i=e[s];switch(a&&i.down(),i.translate(t.enemyDirection),i.status){case"normal":this.plane.hasHit(i)&&i.booming();break;case"booming":i.booming();break;case"died":e.splice(s,1),this.score+=1}}},draw:function(){this.enemys.forEach(function(e){e.draw()}),this.plane.draw()},end:function(e){switch(e){case"failed":this.setStatus("failed"),u.innerHTML=`${this.score}`;break;case"success":this.setStatus("success"),c.innerHTML=`下一个Level： ${this.opts.level+1}`;break;case"all-success":this.setStatus("all-success")}}}).init()},8:function(e,t){}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3V0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvZWxlbWVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvRW5lbXkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL0J1bGxldC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvYXBwLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9LZXlib2FyZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvUGxhbmUuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJyZXF1ZXN0QW5pbUZyYW1lIiwid2luZG93IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwid2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwib1JlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiY2FsbGJhY2siLCJzZXRUaW1lb3V0IiwiQ09ORklHIiwic3RhdHVzIiwibGV2ZWwiLCJ0b3RhbExldmVsIiwibnVtUGVyTGluZSIsImNhbnZhc1BhZGRpbmciLCJidWxsZXRTaXplIiwiYnVsbGV0U3BlZWQiLCJlbmVteVNwZWVkIiwiZW5lbXlTaXplIiwiZW5lbXlHYXAiLCJlbmVteUljb24iLCJlbmVteUJvb21JY29uIiwiZW5lbXlEaXJlY3Rpb24iLCJwbGFuZVNwZWVkIiwicGxhbmVTaXplIiwid2lkdGgiLCJoZWlnaHQiLCJwbGFuZUljb24iLCJFbGVtZW50IiwiW29iamVjdCBPYmplY3RdIiwib3B0cyIsInRoaXMiLCJ4IiwieSIsInNpemUiLCJzcGVlZCIsImFkZFgiLCJhZGRZIiwiRW5lbXlfRW5lbXkiLCJzdXBlciIsImljb24iLCJib29tSWNvbiIsImNvdW50IiwiZGlyZWN0aW9uIiwibW92ZSIsImNvbnRleHQiLCJkcmF3SW1hZ2UiLCJCdWxsZXRfQnVsbGV0IiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJlbmVteSIsImNvbnRhaW5lciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJsZXZlbFRleHQiLCJxdWVyeVNlbGVjdG9yIiwibmV4dExldmVsVGV4dCIsInNjb3JlVGV4dCIsInRvdGFsU2NvcmVUZXh0IiwiY2FudmFzIiwiZ2V0Q29udGV4dCIsImNhbnZhc1dpZHRoIiwiY2xpZW50V2lkdGgiLCJjYW52YXNIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJpbml0IiwiYXNzaWduIiwic2VsZiIsImlubmVyVGV4dCIsInNjb3JlIiwiS2V5Ym9hcmQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJrZXlkb3duIiwia2V5dXAiLCJwcmVzc0xlZnQiLCJwcmVzc1JpZ2h0IiwicHJlc3NTcGFjZSIsImtleUNvZGUiLCJyZXNvdXJjZXMiLCJ0b3RhbCIsImxlbmd0aCIsImZpbmlzaCIsImltYWdlcyIsImZvckVhY2giLCJyZXMiLCJJbWFnZSIsInNyYyIsIm9ubG9hZCIsInJlc291cmNlc09ubG9hZCIsImVuZW15SWNvbkltYWdlIiwiZW5lbXlCb29tSWNvbkltYWdlIiwicGxhbmVJY29uSW1hZ2UiLCJiaW5kRXZlbnQiLCJwbGF5QnRuIiwicmVwbGF5QnRucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJuZXh0QnRuIiwib25jbGljayIsInBsYXkiLCJidG4iLCJzZXRTdGF0dXMiLCJzZXRBdHRyaWJ1dGUiLCJwYWRkaW5nIiwiZW5lbXlzIiwiaiIsInB1c2giLCJwbGFuZU9wdHMiLCJtaW5YIiwibWF4WCIsInBsYW5lIiwiYnVsbGV0cyIsImxhc3RTaG9vdCIsIkRhdGUiLCJub3ciLCJidWxsZXRPcHRzIiwiaGFzSGl0IiwiY3Jhc2giLCJzcGxpY2UiLCJidWxsZXQiLCJ1cCIsImRyYXciLCJkcmF3QnVsbGV0cyIsInVwZGF0YSIsImVuZW15TWF4WSIsImNsZWFyUmVjdCIsInVwZGF0YUVuZW15IiwidXBkYXRhUGxhbmUiLCJlbmQiLCJlbmRUeXBlIiwidHJhbnNsYXRlIiwic2hvb3QiLCJNYXRoIiwibWF4IiwibWluIiwiZW5lbXlNYXhYIiwibW9zdFgiLCJhcnIiLCJpdGVtIiwiZ2V0TW9zdFgiLCJoYXNEb3duIiwiZG93biIsImJvb21pbmciLCJ0eXBlIiwiaW5uZXJIVE1MIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLGFBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFBQXFCLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNBLEtBQUFFLEdBQUEsaUJBQUFGLFFBQUFHLFdBQUEsT0FBQUgsRUFDQSxJQUFBSSxFQUFBWCxPQUFBWSxPQUFBLE1BR0EsR0FGQTFCLEVBQUFrQixFQUFBTyxHQUNBWCxPQUFBQyxlQUFBVSxFQUFBLFdBQXlDVCxZQUFBLEVBQUFLLFVBQ3pDLEVBQUFFLEdBQUEsaUJBQUFGLEVBQUEsUUFBQU0sS0FBQU4sRUFBQXJCLEVBQUFVLEVBQUFlLEVBQUFFLEVBQUEsU0FBQUEsR0FBZ0gsT0FBQU4sRUFBQU0sSUFBcUJDLEtBQUEsS0FBQUQsSUFDckksT0FBQUYsR0FJQXpCLEVBQUE2QixFQUFBLFNBQUExQixHQUNBLElBQUFTLEVBQUFULEtBQUFxQixXQUNBLFdBQTJCLE9BQUFyQixFQUFBLFNBQzNCLFdBQWlDLE9BQUFBLEdBRWpDLE9BREFILEVBQUFVLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVosRUFBQWEsRUFBQSxTQUFBaUIsRUFBQUMsR0FBc0QsT0FBQWpCLE9BQUFrQixVQUFBQyxlQUFBMUIsS0FBQXVCLEVBQUFDLElBR3REL0IsRUFBQWtDLEVBQUEsR0FJQWxDLElBQUFtQyxFQUFBLDJDQ2pGQSxNQUFBQyxFQUNBQyxPQUFBQyx1QkFDQUQsT0FBQUUsNkJBQ0FGLE9BQUFHLDBCQUNBSCxPQUFBSSx3QkFDQUosT0FBQUsseUJBQ0EsU0FBQUMsR0FDQU4sT0FBQU8sV0FBQUQsRUFBQSxTQ0pBLElBQUFFLEdBQ0FDLE9BQUEsUUFDQUMsTUFBQSxFQUNBQyxXQUFBLEVBQ0FDLFdBQUEsRUFDQUMsY0FBQSxHQUNBQyxXQUFBLEdBQ0FDLFlBQUEsR0FDQUMsV0FBQSxFQUNBQyxVQUFBLEdBQ0FDLFNBQUEsR0FDQUMsVUFBQSxrQkFDQUMsY0FBQSxpQkFDQUMsZUFBQSxRQUNBQyxXQUFBLEVBQ0FDLFdBQ0FDLE1BQUEsR0FDQUMsT0FBQSxLQUVBQyxVQUFBLHlCQ3BCQUMsRUFDQUMsWUFBQUMsR0FDQUMsS0FBQUMsRUFBQUYsRUFBQUUsRUFDQUQsS0FBQUUsRUFBQUgsRUFBQUcsRUFDQUYsS0FBQUcsS0FBQUosRUFBQUksS0FDQUgsS0FBQUksTUFBQUwsRUFBQUssTUFPQU4sS0FBQUcsRUFBQUMsR0FDQSxJQUFBRyxFQUFBSixHQUFBLEVBQ0FLLEVBQUFKLEdBQUEsRUFDQUYsS0FBQUMsR0FBQUksRUFDQUwsS0FBQUUsR0FBQUksRUFLQVIsZUNuQkFTLFVBQUFWLEVBQ0FDLFlBQUFDLEdBQ0FTLE1BQUFULEdBT0FDLEtBQUFyQixPQUFBLFNBQ0FxQixLQUFBUyxLQUFBVixFQUFBVSxLQUNBVCxLQUFBVSxTQUFBWCxFQUFBVyxTQUVBVixLQUFBVyxNQUFBLEVBS0FiLFVBQ0FFLEtBQUFyQixPQUFBLFVBQ0FxQixLQUFBVyxRQUNBWCxLQUFBVyxPQUFBLElBQ0FYLEtBQUFyQixPQUFBLFFBT0FtQixVQUFBYyxHQUNBLElBQUFSLEVBQUEsU0FBQVEsR0FBQVosS0FBQUksTUFBQUosS0FBQUksTUFDQUosS0FBQWEsS0FBQVQsRUFBQSxHQUtBTixPQUNBRSxLQUFBYSxLQUFBLEVBQUFiLEtBQUFHLE1BRUFMLE9BQ0EsT0FBQUUsS0FBQXJCLFFBQ0EsYUFDQW1DLEVBQUFDLFVBQ0FmLEtBQUFTLEtBQ0FULEtBQUFDLEVBQ0FELEtBQUFFLEVBQ0FGLEtBQUFHLEtBQ0FILEtBQUFHLE1BRUEsTUFDQSxjQUNBVyxFQUFBQyxVQUNBZixLQUFBVSxTQUNBVixLQUFBQyxFQUNBRCxLQUFBRSxFQUNBRixLQUFBRyxLQUNBSCxLQUFBRyxjQ3ZEQWEsVUFBQW5CLEVBQ0FDLFlBQUFDLEdBQ0FTLE1BQUFULEdBS0FELEtBQ0FFLEtBQUFhLEtBQUEsR0FBQWIsS0FBQUksT0FLQU4sT0FDQWdCLEVBQUFHLFVBQUEsT0FDQUgsRUFBQUksU0FBQWxCLEtBQUFDLEVBQUFELEtBQUFFLEVBQUEsRUFBQUYsS0FBQUcsTUFNQUwsTUFBQXFCLEdBQ0EsUUFDQUEsRUFBQWxCLEVBQUFrQixFQUFBaEIsS0FBQUgsS0FBQUMsR0FDQUQsS0FBQUMsRUFBQSxFQUFBa0IsRUFBQWxCLEdBQ0FrQixFQUFBakIsRUFBQWlCLEVBQUFoQixLQUFBSCxLQUFBRSxHQUNBRixLQUFBRSxFQUFBRixLQUFBRyxLQUFBZ0IsRUFBQWpCLCtDQ3hCQSxJQUFBa0IsRUFBQUMsU0FBQUMsZUFBQSxRQUNBQyxFQUFBRixTQUFBRyxjQUFBLGVBQ0FDLEVBQUFKLFNBQUFHLGNBQUEsb0JBQ0EsSUFBQUUsRUFBQUwsU0FBQUcsY0FBQSxxQkFDQUcsRUFBQU4sU0FBQUcsY0FBQSwwQkFHQSxJQUFBSSxFQUFBUCxTQUFBQyxlQUFBLFVBQ0FSLEVBQUFjLEVBQUFDLFdBQUEsTUFDQUMsRUFBQUYsRUFBQUcsWUFDQUMsRUFBQUosRUFBQUssZUFVQUMsS0FBQSxTQUFBbkMsR0FDQUEsRUFBQXBELE9BQUF3RixVQUErQnBDLEVBQUFyQixHQUMvQnNCLEtBQUFELE9BQ0EsSUFBQXFDLEVBQUFwQyxLQUNBQSxLQUFBckIsT0FBQXFCLEtBQUFELEtBQUFwQixRQUFBLFFBQ0E0QyxFQUFBYyxzQkFBMEN0QyxFQUFBbkIsUUFDMUNvQixLQUFBc0MsTUFBQSxFQUVBdEMsS0FBQXVDLFNBQUEsVUNoQ0F6QyxjQUNBdUIsU0FBQW1CLGlCQUFBLFVBQUFDLElBQ0F6QyxLQUFBMEMsUUFBQUQsS0FFQXBCLFNBQUFtQixpQkFBQSxRQUFBQyxJQUNBekMsS0FBQTJDLE1BQUFGLEtBRUF6QyxLQUFBNEMsV0FBQSxFQUNBNUMsS0FBQTZDLFlBQUEsRUFDQTdDLEtBQUE4QyxZQUFBLEVBTUFoRCxRQUFBMkMsR0FFQSxPQURBQSxFQUFBTSxTQUVBLFFBQ0EvQyxLQUFBNEMsV0FBQSxFQUNBNUMsS0FBQTZDLFlBQUEsRUFDQSxNQUNBLFFBQ0E3QyxLQUFBNkMsWUFBQSxFQUNBN0MsS0FBQTRDLFdBQUEsRUFDQSxNQUNBLFFBQ0E1QyxLQUFBOEMsWUFBQSxHQVNBaEQsTUFBQTJDLEdBRUEsT0FEQUEsRUFBQU0sU0FFQSxRQUNBL0MsS0FBQTRDLFdBQUEsRUFDQSxNQUNBLFFBQ0E1QyxLQUFBNkMsWUFBQSxFQUNBLE1BQ0EsUUFDQTdDLEtBQUE4QyxZQUFBLEtObENBLFNBQUFFLEVBQUF4RSxHQUNBLElBQUF5RSxFQUFBRCxFQUFBRSxPQUNBQyxFQUFBLEVBQ0FDLEtBQ0FKLEVBQUFLLFFBQUEsU0FBQUMsRUFBQXJILEdBQ0FtSCxFQUFBbkgsR0FBQSxJQUFBc0gsTUFDQUgsRUFBQW5ILEdBQUF1SCxJQUFBRixFQUVBRixFQUFBbkgsR0FBQXdILE9BQUEsUUFDQU4sSUFDQUYsR0FDQXpFLEVBQUE0RSxPS2NBTSxFQUZBM0QsRUFBQVYsVUFBQVUsRUFBQVQsY0FBQVMsRUFBQUgsV0FFQXdELElBQ0FyRCxFQUFBNEQsZUFBQVAsRUFBQSxHQUNBckQsRUFBQTZELG1CQUFBUixFQUFBLEdBQ0FyRCxFQUFBOEQsZUFBQVQsRUFBQSxHQUNBaEIsRUFBQXJDLE9BQ0FDLEtBQUE4RCxlQUdBQSxVQUFBLFdBQ0EsSUFBQTFCLEVBQUFwQyxLQUNBK0QsRUFBQTFDLFNBQUFHLGNBQUEsWUFDQXdDLEVBQUEzQyxTQUFBNEMsaUJBQUEsY0FDQUMsRUFBQTdDLFNBQUFHLGNBQUEsWUFFQXVDLEVBQUFJLFFBQUEsV0FDQS9CLEVBQUFnQyxRQUlBSixFQUFBWCxRQUFBLFNBQUFnQixHQUNBQSxFQUFBRixRQUFBLFdBQ0EvQixFQUFBckMsS0FBQW5CLE1BQUEsRUFDQXdELEVBQUFnQyxPQUNBaEMsRUFBQUUsTUFBQSxFQUNBWCxFQUFBVSxVQUFBRCxFQUFBRSxTQUtBNEIsRUFBQUMsUUFBQSxXQUNBL0IsRUFBQXJDLEtBQUFuQixPQUFBLEVBQ0F3RCxFQUFBZ0MsU0FZQUUsVUFBQSxTQUFBM0YsR0FDQXFCLEtBQUFyQixTQUNBeUMsRUFBQW1ELGFBQUEsY0FBQTVGLElBRUF5RixLQUFBLFdBQ0EsSUFDQXJFLEVBQUFDLEtBQUFELEtBQ0F5RSxFQUFBekUsRUFBQWhCLGNBQ0FILEVBQUFtQixFQUFBbkIsTUFDQUUsRUFBQWlCLEVBQUFqQixXQUVBSyxHQURBWSxFQUFBbEIsV0FDQWtCLEVBQUFaLFdBQ0FELEVBQUFhLEVBQUFiLFdBQ0FFLEVBQUFXLEVBQUFYLFNBQ0FDLEVBQUFVLEVBQUE0RCxlQUNBckUsRUFBQVMsRUFBQTZELG1CQUdBNUQsS0FBQXlFLFVBRUEsUUFBQXhJLEVBQUEsRUFBdUJBLEVBQUEyQyxFQUFXM0MsSUFDbEMsUUFBQXlJLEVBQUEsRUFBMkJBLEVBQUE1RixFQUFnQjRGLElBQUEsQ0FDM0MsSUFBQTNFLEdBQ0FFLEVBQUF5RSxHQUFBdkYsRUFBQUMsR0FBQW9GLEVBQ0F0RSxFQUFBakUsRUFBQWtELEVBQUFxRixFQUNBcEUsTUFBQWxCLEVBQ0F1QixLQUFBcEIsRUFDQXFCLFNBQUFwQixFQUNBYSxLQUFBaEIsR0FFQWEsS0FBQXlFLE9BQUFFLEtBQUEsSUFBQXBFLEVBQUFSLElBS0EsSUFBQTZFLEdBQ0EzRSxHQUFBNkIsRUFBQS9CLEVBQUFOLFVBQUFDLE9BQUEsRUFDQVEsRUFBQThCLEVBQUF3QyxFQUFBekUsRUFBQU4sVUFBQUUsT0FDQVMsTUFBQUwsRUFBQVAsV0FDQVcsS0FBQUosRUFBQU4sVUFDQWdCLEtBQUFWLEVBQUE4RCxlQUNBZ0IsS0FBQTlFLEVBQUFoQixjQUNBK0YsS0FBQWhELEVBQUEvQixFQUFBaEIsY0FBQWdCLEVBQUFOLFVBQUFDLE1BQ0FWLFdBQUFlLEVBQUFmLFdBQ0FDLFlBQUFjLEVBQUFkLGFBRUFlLEtBQUErRSxNQUFBLGtCRTNIQWxGLEVBQ0FDLFlBQUFDLEdBQ0FTLE1BQUFULEdBRUFDLEtBQUFTLEtBQUFWLEVBQUFVLEtBQ0FULEtBQUE2RSxLQUFBOUUsRUFBQThFLEtBQ0E3RSxLQUFBOEUsS0FBQS9FLEVBQUErRSxLQUdBOUUsS0FBQWdGLFdBQ0FoRixLQUFBaEIsV0FBQWUsRUFBQWYsV0FDQWdCLEtBQUFmLFlBQUFjLEVBQUFkLFlBRUFlLEtBQUFpRixVQUFBQyxLQUFBQyxNQU1BckYsUUFFQSxHQUFBb0YsS0FBQUMsTUFBQW5GLEtBQUFpRixVQUFBLEtBQ0EsSUFBQUcsR0FDQW5GLEVBQUFELEtBQUFDLEVBQUFELEtBQUFHLEtBQUFULE1BQUEsRUFDQVEsRUFBQUYsS0FBQUUsRUFDQUMsS0FBQUgsS0FBQWhCLFdBQ0FvQixNQUFBSixLQUFBZixhQUVBZSxLQUFBZ0YsUUFBQUwsS0FBQSxJQUFBM0QsRUFBQW9FLElBQ0FwRixLQUFBaUYsVUFBQSxJQUFBQyxNQU9BcEYsVUFBQWMsR0FDQSxJQUFBUixFQUFBLFNBQUFRLEdBQUFaLEtBQUFJLE1BQUFKLEtBQUFJLE1BQ0FKLEtBQUFhLEtBQUFULEVBQUEsR0FNQU4sT0FBQXFCLEdBQ0EsSUFBQWtFLEdBQUEsRUFDQSxRQUFBcEosRUFBQStELEtBQUFnRixRQUFBOUIsT0FBQSxFQUE2Q2pILEdBQUEsRUFBUUEsSUFFckQsR0FEQStELEtBQUFnRixRQUFBL0ksR0FDQXFKLE1BQUFuRSxHQUFBLENBQ0FuQixLQUFBZ0YsUUFBQU8sT0FBQXRKLEVBQUEsR0FDQW9KLEdBQUEsRUFDQSxNQUdBLE9BQUFBLEVBS0F2RixjQUNBLFFBQUE3RCxFQUFBK0QsS0FBQWdGLFFBQUE5QixPQUFBLEVBQTZDakgsR0FBQSxFQUFRQSxJQUFBLENBQ3JELElBQUF1SixFQUFBeEYsS0FBQWdGLFFBQUEvSSxHQUNBdUosRUFBQUMsS0FDQUQsRUFBQXRGLEdBQUEsRUFBQXNGLEVBQUFyRixLQUNBSCxLQUFBZ0YsUUFBQU8sT0FBQXRKLEVBQUEsR0FFQXVKLEVBQUFFLFFBT0E1RixPQUNBZ0IsRUFBQUMsVUFDQWYsS0FBQVMsS0FDQVQsS0FBQUMsRUFDQUQsS0FBQUUsRUFDQUYsS0FBQUcsS0FBQVQsTUFDQU0sS0FBQUcsS0FBQVIsUUFFQUssS0FBQTJGLGdCRjBDQWYsR0FHQWxELEVBQUFXLFVBQUFyQyxLQUFBc0MsTUFDQVgsRUFBQVUsVUFBQXJDLEtBQUFzQyxNQUVBdEMsS0FBQXNFLFVBQUEsV0FDQXRFLEtBQUE0RixVQUtBQSxPQUFBLFdBQ0EsSUFDQTdGLEVBQUFDLEtBQUFELEtBQ0EwRSxFQUFBekUsS0FBQXlFLE9BQ0FvQixFQUNBN0QsRUFBQWpDLEVBQUFoQixjQUFBZ0IsRUFBQU4sVUFBQUUsT0FhQSxHQVZBbUIsRUFBQWdGLFVBQUEsSUFBQWhFLEVBQUFFLEdBR0FoQyxLQUFBK0YsY0FDQS9GLEtBQUFnRyxjQUVBdEUsRUFBQVcsVUFBQXJDLEtBQUFzQyxNQUNBWCxFQUFBVSxVQUFBckMsS0FBQXNDLE1BR0EsSUFBQW1DLEVBQUF2QixPQU9BdUIsSUFBQXZCLE9BQUEsR0FBQWhELEdBQUEyRixFQUNBN0YsS0FBQWlHLElBQUEsV0FLQWpHLEtBQUEwRixPQUdBekgsRUFBQSxLQUNBK0IsS0FBQTRGLGdCQWpCQSxDQUNBLElBQUFNLEVBQ0FuRyxFQUFBbkIsUUFBQW1CLEVBQUFsQixXQUFBLHdCQUNBbUIsS0FBQWlHLElBQUFDLEtBb0JBRixZQUFBLFdBRUFoRyxLQUFBdUMsU0FBQUssV0FDQTVDLEtBQUErRSxNQUFBb0IsVUFBQSxRQUVBbkcsS0FBQXVDLFNBQUFNLFlBQ0E3QyxLQUFBK0UsTUFBQW9CLFVBQUEsU0FHQW5HLEtBQUF1QyxTQUFBTyxZQUNBOUMsS0FBQStFLE1BQUFxQixRQUlBcEcsS0FBQStFLE1BQUE5RSxFQUFBb0csS0FBQUMsSUFBQXRHLEtBQUErRSxNQUFBOUUsRUFBQUQsS0FBQUQsS0FBQWhCLGVBQ0FpQixLQUFBK0UsTUFBQTlFLEVBQUFvRyxLQUFBRSxJQUNBdkcsS0FBQStFLE1BQUE5RSxFQUNBNkIsRUFBQTlCLEtBQUFELEtBQUFoQixjQUFBaUIsS0FBQStFLE1BQUE1RSxLQUFBVCxRQU1BcUcsWUFBQSxXQUNBLElBQUF0QixFQUFBekUsS0FBQXlFLE9BQ0ExRSxFQUFBQyxLQUFBRCxLQUNBeUUsRUFBQXpFLEVBQUFoQixjQUNBeUgsRUFBQTFFLEVBQUEwQyxFQUFBekUsRUFBQVosVUFFQXNILEVML0tBLFNBQUFDLEdBQ0EsSUFBQUosRUFBQSxLQUNBQyxFQUFBLEtBUUEsT0FQQUcsRUFBQXJELFFBQUFzRCxJQUNBTCxLQUFBSyxFQUFBMUcsRUFDQXNHLEtBQUFJLEVBQUExRyxFQUVBcUcsRUFBQUssRUFBQTFHLEVBQUFxRyxFQUFBSyxFQUFBMUcsRUFBQXFHLEVBQ0FDLEVBQUFJLEVBQUExRyxFQUFBc0csRUFBQUksRUFBQTFHLEVBQUFzRyxLQUVZRCxNQUFBQyxPS3FLWkssQ0FBQW5DLEdBRUFvQyxHQUFBLEdBR0FKLEVBQUFGLElBQUEvQixHQUFBaUMsRUFBQUgsSUFBQUUsS0FFQXpHLEVBQUFSLGVBQ0EsU0FBQVEsRUFBQVIsZUFBQSxlQUNBc0gsR0FBQSxHQUdBLFFBQUE1SyxFQUFBd0ksRUFBQXZCLE9BQUEsRUFBdUNqSCxHQUFBLEVBQVFBLElBQUEsQ0FDL0MsSUFBQWtGLEVBQUFzRCxFQUFBeEksR0FVQSxPQVJBNEssR0FDQTFGLEVBQUEyRixPQUlBM0YsRUFBQWdGLFVBQUFwRyxFQUFBUixnQkFHQTRCLEVBQUF4QyxRQUNBLGFBQ0FxQixLQUFBK0UsTUFBQU0sT0FBQWxFLElBQ0FBLEVBQUE0RixVQUVBLE1BQ0EsY0FDQTVGLEVBQUE0RixVQUNBLE1BQ0EsV0FDQXRDLEVBQUFjLE9BQUF0SixFQUFBLEdBRUErRCxLQUFBc0MsT0FBQSxLQVVBb0QsS0FBQSxXQUVBMUYsS0FBQXlFLE9BQUFwQixRQUFBLFNBQUFsQyxHQUNBQSxFQUFBdUUsU0FJQTFGLEtBQUErRSxNQUFBVyxRQVVBTyxJQUFBLFNBQUFlLEdBQ0EsT0FBQUEsR0FDQSxhQUNBaEgsS0FBQXNFLFVBQUEsVUFDQTVDLEVBQUF1RixhQUF5Q2pILEtBQUFzQyxRQUN6QyxNQUNBLGNBQ0F0QyxLQUFBc0UsVUFBQSxXQUNBN0MsRUFBQXdGLHVCQUF1RGpILEtBQUFELEtBQUFuQixNQUFBLElBQ3ZELE1BQ0Esa0JBQ0FvQixLQUFBc0UsVUFBQSxtQkFRQXBDIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIi8vIOWIpOaWreaYr+WQpuaciSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUg5pa55rOV77yM5aaC5p6c5rKh5pyJ5YiZ5qih5ouf5a6e546wXG5leHBvcnQgY29uc3QgcmVxdWVzdEFuaW1GcmFtZSA9XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuICAgIHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcbiAgICB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgd2luZG93Lm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcbiAgICB3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcbiAgICBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICB3aW5kb3cuc2V0VGltZW91dChjYWxsYmFjaywgMTAwMCAvIDMwKVxuICAgIH1cblxuLyoqXG4gKiDotYTmupDliqDovb1cbiAqIEBwYXJhbSB7QXJyYXl9IHJlc291cmNlcyDotYTmupDmlbDnu4RcbiAqIEBwYXJhbSB7Kn0gY2FsbGJhY2tcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc291cmNlc09ubG9hZChyZXNvdXJjZXMsIGNhbGxiYWNrKSB7XG4gICAgbGV0IHRvdGFsID0gcmVzb3VyY2VzLmxlbmd0aFxuICAgIGxldCBmaW5pc2ggPSAwXG4gICAgbGV0IGltYWdlcyA9IFtdXG4gICAgcmVzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24ocmVzLCBpKSB7XG4gICAgICAgIGltYWdlc1tpXSA9IG5ldyBJbWFnZSgpXG4gICAgICAgIGltYWdlc1tpXS5zcmMgPSByZXNcbiAgICAgICAgLy8g5Yqg6L295a6M5oiQXG4gICAgICAgIGltYWdlc1tpXS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICBmaW5pc2grK1xuICAgICAgICAgICAgaWYgKGZpbmlzaCA9PT0gdG90YWwpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhpbWFnZXMpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxufVxuXG4vKipcbiAqIOiOt+WPluaVsOe7hOS4rXjovbTmnIDlpKflgLwsIOWSjOacgOWwj+WAvCAo55So5p2l5Yik5pat5piv5ZCm56Kw5aOBKVxuICogQHBhcmFtIHtBcnJheX0gYXJyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNb3N0WChhcnIpIHtcbiAgICBsZXQgbWF4ID0gbnVsbFxuICAgIGxldCBtaW4gPSBudWxsXG4gICAgYXJyLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgbWF4ID0gbWF4IHx8IGl0ZW0ueFxuICAgICAgICBtaW4gPSBtaW4gfHwgaXRlbS54XG5cbiAgICAgICAgbWF4ID0gaXRlbS54ID4gbWF4ID8gaXRlbS54IDogbWF4XG4gICAgICAgIG1pbiA9IGl0ZW0ueCA8IG1pbiA/IGl0ZW0ueCA6IG1pblxuICAgIH0pXG4gICAgcmV0dXJuIHsgbWF4OiBtYXgsIG1pbjogbWluIH1cbn1cbiIsIi8qKlxuICog5ri45oiP55u45YWz6YWN572uXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG5leHBvcnQgdmFyIENPTkZJRyA9IHtcbiAgICBzdGF0dXM6ICdzdGFydCcsIC8vIOa4uOaIj+W8gOWni+m7mOiupOS4uuW8gOWni+S4rVxuICAgIGxldmVsOiAxLCAvLyDmuLjmiI/pu5jorqTnrYnnuqdcbiAgICB0b3RhbExldmVsOiA2LCAvLyDmgLvlhbE25YWzXG4gICAgbnVtUGVyTGluZTogNiwgLy8g5ri45oiP6buY6K6k5q+P6KGM5aSa5bCR5Liq5oCq5YW9XG4gICAgY2FudmFzUGFkZGluZzogMzAsIC8vIOm7mOiupOeUu+W4g+eahOmXtOmalFxuICAgIGJ1bGxldFNpemU6IDEwLCAvLyDpu5jorqTlrZDlvLnplb/luqZcbiAgICBidWxsZXRTcGVlZDogMTAsIC8vIOm7mOiupOWtkOW8ueeahOenu+WKqOmAn+W6plxuICAgIGVuZW15U3BlZWQ6IDIsIC8vIOm7mOiupOaVjOS6uuenu+WKqOi3neemu1xuICAgIGVuZW15U2l6ZTogNTAsIC8vIOm7mOiupOaVjOS6uueahOWwuuWvuFxuICAgIGVuZW15R2FwOiAxMCwgLy8g6buY6K6k5pWM5Lq65LmL6Ze055qE6Ze06LedXG4gICAgZW5lbXlJY29uOiAnLi9pbWcvZW5lbXkucG5nJywgLy8g5oCq5YW955qE5Zu+5YOPXG4gICAgZW5lbXlCb29tSWNvbjogJy4vaW1nL2Jvb20ucG5nJywgLy8g5oCq5YW95q275Lqh55qE5Zu+5YOPXG4gICAgZW5lbXlEaXJlY3Rpb246ICdyaWdodCcsIC8vIOm7mOiupOaVjOS6uuS4gOW8gOWni+W+gOWPs+enu+WKqFxuICAgIHBsYW5lU3BlZWQ6IDUsIC8vIOm7mOiupOmjnuacuuavj+S4gOatpeenu+WKqOeahOi3neemu1xuICAgIHBsYW5lU2l6ZToge1xuICAgICAgICB3aWR0aDogNjAsXG4gICAgICAgIGhlaWdodDogMTAwXG4gICAgfSwgLy8g6buY6K6k6aOe5py655qE5bC65a+4LFxuICAgIHBsYW5lSWNvbjogJy4vaW1nL3BsYW5lLnBuZydcbn1cbiIsIi8qKlxuICog54i257G7XG4gKi9cbmV4cG9ydCBjbGFzcyBFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihvcHRzKSB7XG4gICAgICAgIHRoaXMueCA9IG9wdHMueFxuICAgICAgICB0aGlzLnkgPSBvcHRzLnlcbiAgICAgICAgdGhpcy5zaXplID0gb3B0cy5zaXplXG4gICAgICAgIHRoaXMuc3BlZWQgPSBvcHRzLnNwZWVkXG4gICAgfVxuICAgIC8qKlxuICAgICAqIOWOn+Wei+aWueazlSDmlLnlj5h4LCB555qE5YC8XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHhcbiAgICAgKiBAcGFyYW0geyp9IHlcbiAgICAgKi9cbiAgICBtb3ZlKHgsIHkpIHtcbiAgICAgICAgbGV0IGFkZFggPSB4IHx8IDBcbiAgICAgICAgbGV0IGFkZFkgPSB5IHx8IDBcbiAgICAgICAgdGhpcy54ICs9IGFkZFhcbiAgICAgICAgdGhpcy55ICs9IGFkZFlcbiAgICB9XG4gICAgLyoqXG4gICAgICog5Y6f5Z6L5pa55rOVIOe7mOWItlxuICAgICAqL1xuICAgIGRyYXcoKSB7fVxufVxuIiwiaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4vZWxlbWVudC5qcydcbmltcG9ydCB7IGNvbnRleHQgfSBmcm9tICcuL2FwcC5qcydcbi8qKlxuICog5pWM5Lq657G7XG4gKi9cbmV4cG9ydCBjbGFzcyBFbmVteSBleHRlbmRzIEVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKG9wdHMpIHtcbiAgICAgICAgc3VwZXIob3B0cylcbiAgICAgICAgLyoqXG4gICAgICAgICAqIOaVjOS6uuacieS4ieenjeeKtuaAgVxuICAgICAgICAgKiDmraPluLggbm9ybWFsXG4gICAgICAgICAqIOeIhueCuCBib29taW5nXG4gICAgICAgICAqIOatu+S6oSBkaWVkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN0YXR1cyA9ICdub3JtYWwnXG4gICAgICAgIHRoaXMuaWNvbiA9IG9wdHMuaWNvblxuICAgICAgICB0aGlzLmJvb21JY29uID0gb3B0cy5ib29tSWNvblxuICAgICAgICAvLyDniIbngrjorqHmlbDlmahcbiAgICAgICAgdGhpcy5jb3VudCA9IDBcbiAgICB9XG4gICAgLyoqXG4gICAgICog54iG54K4XG4gICAgICovXG4gICAgYm9vbWluZygpIHtcbiAgICAgICAgdGhpcy5zdGF0dXMgPSAnYm9vbWluZydcbiAgICAgICAgdGhpcy5jb3VudCsrXG4gICAgICAgIGlmICh0aGlzLmNvdW50ID49IDMpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gJ2RpZWQnXG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICog5bem5Y+z56e75YqoXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGRpcmVjdGlvbiDmlrnlkJFcbiAgICAgKi9cbiAgICB0cmFuc2xhdGUoZGlyZWN0aW9uKSB7XG4gICAgICAgIGxldCBzcGVlZCA9IGRpcmVjdGlvbiA9PT0gJ2xlZnQnID8gLXRoaXMuc3BlZWQgOiB0aGlzLnNwZWVkXG4gICAgICAgIHRoaXMubW92ZShzcGVlZCwgMClcbiAgICB9XG4gICAgLyoqXG4gICAgICog5ZCR5LiL56e75YqoXG4gICAgICovXG4gICAgZG93bigpIHtcbiAgICAgICAgdGhpcy5tb3ZlKDAsIHRoaXMuc2l6ZSlcbiAgICB9XG4gICAgZHJhdygpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLnN0YXR1cykge1xuICAgICAgICAgICAgY2FzZSAnbm9ybWFsJzpcbiAgICAgICAgICAgICAgICBjb250ZXh0LmRyYXdJbWFnZShcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pY29uLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLngsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMueSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaXplLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNpemVcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgJ2Jvb21pbmcnOlxuICAgICAgICAgICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJvb21JY29uLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLngsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMueSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaXplLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNpemVcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuL2VsZW1lbnQuanMnXG5pbXBvcnQgeyBjb250ZXh0IH0gZnJvbSAnLi9hcHAuanMnXG5cbi8qKlxuICog5a2Q5by557G7XG4gKi9cbmV4cG9ydCBjbGFzcyBCdWxsZXQgZXh0ZW5kcyBFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihvcHRzKSB7XG4gICAgICAgIHN1cGVyKG9wdHMpXG4gICAgfVxuICAgIC8qKlxuICAgICAqIOWQkeS4ilxuICAgICAqL1xuICAgIHVwKCkge1xuICAgICAgICB0aGlzLm1vdmUoMCwgLXRoaXMuc3BlZWQpXG4gICAgfVxuICAgIC8qKlxuICAgICAqIOe7mOWItlxuICAgICAqL1xuICAgIGRyYXcoKSB7XG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gJyNmZmYnXG4gICAgICAgIGNvbnRleHQuZmlsbFJlY3QodGhpcy54LCB0aGlzLnksIDEsIHRoaXMuc2l6ZSlcbiAgICB9XG4gICAgLyoqXG4gICAgICog5Yik5pat5a2Q5by55piv5ZCm5Ye75Lit5Lyg6L+b5p2l55qE5pWM5Lq6XG4gICAgICogQHBhcmFtIHtPYmplY3R9IGVuZW15IOaVjOS6ulxuICAgICAqL1xuICAgIGNyYXNoKGVuZW15KSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICEoZW5lbXkueCArIGVuZW15LnNpemUgPCB0aGlzLngpICYmXG4gICAgICAgICAgICAhKHRoaXMueCArIDEgPCBlbmVteS54KSAmJlxuICAgICAgICAgICAgIShlbmVteS55ICsgZW5lbXkuc2l6ZSA8IHRoaXMueSkgJiZcbiAgICAgICAgICAgICEodGhpcy55ICsgdGhpcy5zaXplIDwgZW5lbXkueSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxufVxuIiwiaW1wb3J0IHsgcmVxdWVzdEFuaW1GcmFtZSwgcmVzb3VyY2VzT25sb2FkLCBnZXRNb3N0WCB9IGZyb20gJy4vdXRpbC5qcydcbmltcG9ydCB7IENPTkZJRyB9IGZyb20gJy4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgRW5lbXkgfSBmcm9tICcuL0VuZW15LmpzJ1xuaW1wb3J0IHsgUGxhbmUgfSBmcm9tICcuL1BsYW5lLmpzJ1xuaW1wb3J0IHsgS2V5Ym9hcmQgfSBmcm9tICcuL0tleWJvYXJkLmpzJ1xuaW1wb3J0ICcuLi9zdHlsZS5jc3MnXG5cbi8vIOWFg+e0oFxubGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lJylcbmxldCBsZXZlbFRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZS1sZXZlbCcpXG5sZXQgbmV4dExldmVsVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYW1lLW5leHQtbGV2ZWwnKVxudmFyIHNjb3JlVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYW1lLWluZm8gLnNjb3JlJylcbnZhciB0b3RhbFNjb3JlVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYW1lLWluZm8tdGV4dCAuc2NvcmUnKVxuXG4vLyDnlLvluINcbmxldCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzJylcbmV4cG9ydCBsZXQgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXG5sZXQgY2FudmFzV2lkdGggPSBjYW52YXMuY2xpZW50V2lkdGhcbmxldCBjYW52YXNIZWlnaHQgPSBjYW52YXMuY2xpZW50SGVpZ2h0XG4vKipcbiAqIOaVtOS4qua4uOaIj+WvueixoVxuICovXG5jb25zdCBHQU1FID0ge1xuICAgIC8qKlxuICAgICAqIOWIneWni+WMluWHveaVsCzov5nkuKrlh73mlbDlj6rmiafooYzkuIDmrKFcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IG9wdHNcbiAgICAgKiBAcmV0dXJuIHtbdHlwZV19ICAgICAgW2Rlc2NyaXB0aW9uXVxuICAgICAqL1xuICAgIGluaXQ6IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICAgICAgb3B0cyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdHMsIENPTkZJRylcbiAgICAgICAgdGhpcy5vcHRzID0gb3B0c1xuICAgICAgICBsZXQgc2VsZiA9IHRoaXNcbiAgICAgICAgdGhpcy5zdGF0dXMgPSB0aGlzLm9wdHMuc3RhdHVzIHx8ICdzdGFydCdcbiAgICAgICAgbGV2ZWxUZXh0LmlubmVyVGV4dCA9IGDlvZPliY1MZXZlbDogJHtvcHRzLmxldmVsfWBcbiAgICAgICAgdGhpcy5zY29yZSA9IDBcbiAgICAgICAgLy8g6ZSu55uY5pON5L2c5a+56LGhXG4gICAgICAgIHRoaXMuS2V5Ym9hcmQgPSBuZXcgS2V5Ym9hcmQoKVxuXG4gICAgICAgIC8vIOi1hOa6kOWIl+ihqFxuICAgICAgICBsZXQgcmVzb3VyY2VzQXJyID0gW29wdHMuZW5lbXlJY29uLCBvcHRzLmVuZW15Qm9vbUljb24sIG9wdHMucGxhbmVJY29uXVxuICAgICAgICAvLyDliqDovb3lrozmiJDlkI5cbiAgICAgICAgcmVzb3VyY2VzT25sb2FkKHJlc291cmNlc0FyciwgKGltYWdlcykgPT4ge1xuICAgICAgICAgICAgb3B0cy5lbmVteUljb25JbWFnZSA9IGltYWdlc1swXVxuICAgICAgICAgICAgb3B0cy5lbmVteUJvb21JY29uSW1hZ2UgPSBpbWFnZXNbMV1cbiAgICAgICAgICAgIG9wdHMucGxhbmVJY29uSW1hZ2UgPSBpbWFnZXNbMl1cbiAgICAgICAgICAgIHNlbGYub3B0cyA9IG9wdHNcbiAgICAgICAgICAgIHRoaXMuYmluZEV2ZW50KClcbiAgICAgICAgfSlcbiAgICB9LFxuICAgIGJpbmRFdmVudDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpc1xuICAgICAgICB2YXIgcGxheUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1wbGF5JylcbiAgICAgICAgdmFyIHJlcGxheUJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtcmVwbGF5JylcbiAgICAgICAgdmFyIG5leHRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtbmV4dCcpXG4gICAgICAgIC8vIOW8gOWni+a4uOaIj+aMiemSrue7keWumlxuICAgICAgICBwbGF5QnRuLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYucGxheSgpXG4gICAgICAgIH1cblxuICAgICAgICAvLyDph43mlrDmuLjmiI/mjInpkq7nu5HlrppcbiAgICAgICAgcmVwbGF5QnRucy5mb3JFYWNoKGZ1bmN0aW9uKGJ0bikge1xuICAgICAgICAgICAgYnRuLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBzZWxmLm9wdHMubGV2ZWwgPSAxXG4gICAgICAgICAgICAgICAgc2VsZi5wbGF5KClcbiAgICAgICAgICAgICAgICBzZWxmLnNjb3JlID0gMFxuICAgICAgICAgICAgICAgIHRvdGFsU2NvcmVUZXh0LmlubmVyVGV4dCA9IHNlbGYuc2NvcmVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICAvLyDkuIvkuIDlhbPmjInpkq7nu5HlrppcbiAgICAgICAgbmV4dEJ0bi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLm9wdHMubGV2ZWwgKz0gMVxuICAgICAgICAgICAgc2VsZi5wbGF5KClcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICog5pu05paw5ri45oiP54q25oCB77yM5YiG5Yir5pyJ5Lul5LiL5Yeg56eN54q25oCB77yaXG4gICAgICogc3RhcnQgIOa4uOaIj+WJjVxuICAgICAqIHBsYXlpbmcg5ri45oiP5LitXG4gICAgICogZmFpbGVkIOa4uOaIj+Wksei0pVxuICAgICAqIHN1Y2Nlc3Mg5ri45oiP5oiQ5YqfXG4gICAgICogYWxsLXN1Y2Nlc3Mg5ri45oiP6YCa6L+HXG4gICAgICogc3RvcCDmuLjmiI/mmoLlgZzvvIjlj6/pgInvvIlcbiAgICAgKi9cbiAgICBzZXRTdGF0dXM6IGZ1bmN0aW9uKHN0YXR1cykge1xuICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1c1xuICAgICAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKCdkYXRhLXN0YXR1cycsIHN0YXR1cylcbiAgICB9LFxuICAgIHBsYXk6IGZ1bmN0aW9uKCkge1xuICAgICAgICBsZXQgc2VsZiA9IHRoaXNcbiAgICAgICAgbGV0IG9wdHMgPSB0aGlzLm9wdHNcbiAgICAgICAgbGV0IHBhZGRpbmcgPSBvcHRzLmNhbnZhc1BhZGRpbmdcbiAgICAgICAgbGV0IGxldmVsID0gb3B0cy5sZXZlbFxuICAgICAgICBsZXQgbnVtUGVyTGluZSA9IG9wdHMubnVtUGVyTGluZVxuICAgICAgICBsZXQgdG90YWxMZXZlbCA9IG9wdHMudG90YWxMZXZlbFxuICAgICAgICBsZXQgZW5lbXlTaXplID0gb3B0cy5lbmVteVNpemVcbiAgICAgICAgbGV0IGVuZW15U3BlZWQgPSBvcHRzLmVuZW15U3BlZWRcbiAgICAgICAgbGV0IGVuZW15R2FwID0gb3B0cy5lbmVteUdhcFxuICAgICAgICBsZXQgZW5lbXlJY29uID0gb3B0cy5lbmVteUljb25JbWFnZVxuICAgICAgICBsZXQgZW5lbXlCb29tSWNvbiA9IG9wdHMuZW5lbXlCb29tSWNvbkltYWdlXG5cbiAgICAgICAgLy8g5riF56m65pWM5Lq6XG4gICAgICAgIHRoaXMuZW5lbXlzID0gW11cbiAgICAgICAgLy8g5Yib5bu65pWM5Lq6XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGV2ZWw7IGkrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBudW1QZXJMaW5lOyBqKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgb3B0cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgeDogaiAqIChlbmVteVNpemUgKyBlbmVteUdhcCkgKyBwYWRkaW5nLFxuICAgICAgICAgICAgICAgICAgICB5OiBpICogZW5lbXlTaXplICsgcGFkZGluZyxcbiAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IGVuZW15U3BlZWQsXG4gICAgICAgICAgICAgICAgICAgIGljb246IGVuZW15SWNvbixcbiAgICAgICAgICAgICAgICAgICAgYm9vbUljb246IGVuZW15Qm9vbUljb24sXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IGVuZW15U2l6ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmVuZW15cy5wdXNoKG5ldyBFbmVteShvcHRzKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOWIm+W7uuaIkeeahOmjnuaculxuICAgICAgICBsZXQgcGxhbmVPcHRzID0ge1xuICAgICAgICAgICAgeDogKGNhbnZhc1dpZHRoIC0gb3B0cy5wbGFuZVNpemUud2lkdGgpIC8gMixcbiAgICAgICAgICAgIHk6IGNhbnZhc0hlaWdodCAtIHBhZGRpbmcgLSBvcHRzLnBsYW5lU2l6ZS5oZWlnaHQsXG4gICAgICAgICAgICBzcGVlZDogb3B0cy5wbGFuZVNwZWVkLFxuICAgICAgICAgICAgc2l6ZTogb3B0cy5wbGFuZVNpemUsXG4gICAgICAgICAgICBpY29uOiBvcHRzLnBsYW5lSWNvbkltYWdlLFxuICAgICAgICAgICAgbWluWDogb3B0cy5jYW52YXNQYWRkaW5nLFxuICAgICAgICAgICAgbWF4WDogY2FudmFzV2lkdGggLSBvcHRzLmNhbnZhc1BhZGRpbmcgLSBvcHRzLnBsYW5lU2l6ZS53aWR0aCxcbiAgICAgICAgICAgIGJ1bGxldFNpemU6IG9wdHMuYnVsbGV0U2l6ZSxcbiAgICAgICAgICAgIGJ1bGxldFNwZWVkOiBvcHRzLmJ1bGxldFNwZWVkXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wbGFuZSA9IG5ldyBQbGFuZShwbGFuZU9wdHMpXG5cbiAgICAgICAgLy8g5pi+56S65YiG5pWwXG4gICAgICAgIHNjb3JlVGV4dC5pbm5lclRleHQgPSB0aGlzLnNjb3JlXG4gICAgICAgIHRvdGFsU2NvcmVUZXh0LmlubmVyVGV4dCA9IHRoaXMuc2NvcmVcblxuICAgICAgICB0aGlzLnNldFN0YXR1cygncGxheWluZycpXG4gICAgICAgIHRoaXMudXBkYXRhKClcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIOavj+W4p+abtOaWsFxuICAgICAqL1xuICAgIHVwZGF0YTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGxldCBzZWxmID0gdGhpc1xuICAgICAgICBsZXQgb3B0cyA9IHRoaXMub3B0c1xuICAgICAgICBsZXQgZW5lbXlzID0gdGhpcy5lbmVteXNcbiAgICAgICAgbGV0IGVuZW15TWF4WSA9XG4gICAgICAgICAgICBjYW52YXNIZWlnaHQgLSBvcHRzLmNhbnZhc1BhZGRpbmcgLSBvcHRzLnBsYW5lU2l6ZS5oZWlnaHRcblxuICAgICAgICAvLyDmuIXpmaTnlLvluINcbiAgICAgICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodClcblxuICAgICAgICAvLyDmm7TmlrBcbiAgICAgICAgdGhpcy51cGRhdGFFbmVteSgpXG4gICAgICAgIHRoaXMudXBkYXRhUGxhbmUoKVxuICAgICAgICAvLyDmm7TmlrDliIbmlbBcbiAgICAgICAgc2NvcmVUZXh0LmlubmVyVGV4dCA9IHRoaXMuc2NvcmVcbiAgICAgICAgdG90YWxTY29yZVRleHQuaW5uZXJUZXh0ID0gdGhpcy5zY29yZVxuXG4gICAgICAgIC8vIOaVjOS6uuWFqOmDqOa2iOWksVxuICAgICAgICBpZiAoZW5lbXlzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgbGV0IGVuZFR5cGUgPVxuICAgICAgICAgICAgICAgIG9wdHMubGV2ZWwgPT09IG9wdHMudG90YWxMZXZlbCA/ICdhbGwtc3VjY2VzcycgOiAnc3VjY2VzcydcbiAgICAgICAgICAgIHRoaXMuZW5kKGVuZFR5cGUpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICAvLyDmnIDlkI7kuIDkuKrmlYzkurrmmK/lkKbop6blupVcbiAgICAgICAgaWYgKGVuZW15c1tlbmVteXMubGVuZ3RoIC0gMV0ueSA+PSBlbmVteU1heFkpIHtcbiAgICAgICAgICAgIHRoaXMuZW5kKCdmYWlsZWQnKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICAvLyDnu5jliLbnlLvluINcbiAgICAgICAgdGhpcy5kcmF3KClcblxuICAgICAgICAvLyDlvqrnjq9cbiAgICAgICAgcmVxdWVzdEFuaW1GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0YSgpXG4gICAgICAgIH0pXG4gICAgfSxcbiAgICAvKipcbiAgICAgKiDmm7TmlrDmiJHnmoTpo57mnLpcbiAgICAgKi9cbiAgICB1cGRhdGFQbGFuZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIOmjnuacuuenu+WKqFxuICAgICAgICBpZiAodGhpcy5LZXlib2FyZC5wcmVzc0xlZnQpIHtcbiAgICAgICAgICAgIHRoaXMucGxhbmUudHJhbnNsYXRlKCdsZWZ0JylcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5LZXlib2FyZC5wcmVzc1JpZ2h0KSB7XG4gICAgICAgICAgICB0aGlzLnBsYW5lLnRyYW5zbGF0ZSgncmlnaHQnKVxuICAgICAgICB9XG4gICAgICAgIC8vIOmjnuacuuWwhOWHu1xuICAgICAgICBpZiAodGhpcy5LZXlib2FyZC5wcmVzc1NwYWNlKSB7XG4gICAgICAgICAgICB0aGlzLnBsYW5lLnNob290KClcbiAgICAgICAgICAgIC8vIHRoaXMuS2V5Ym9hcmQucHJlc3NTcGFjZSA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgLy8g6ZmQ5Yi26aOe5py656e75Yqo6IyD5Zu0XG4gICAgICAgIHRoaXMucGxhbmUueCA9IE1hdGgubWF4KHRoaXMucGxhbmUueCwgdGhpcy5vcHRzLmNhbnZhc1BhZGRpbmcpXG4gICAgICAgIHRoaXMucGxhbmUueCA9IE1hdGgubWluKFxuICAgICAgICAgICAgdGhpcy5wbGFuZS54LFxuICAgICAgICAgICAgY2FudmFzV2lkdGggLSB0aGlzLm9wdHMuY2FudmFzUGFkZGluZyAtIHRoaXMucGxhbmUuc2l6ZS53aWR0aFxuICAgICAgICApXG4gICAgfSxcbiAgICAvKipcbiAgICAgKiDmm7TmlrDmlYzkurpcbiAgICAgKi9cbiAgICB1cGRhdGFFbmVteTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGxldCBlbmVteXMgPSB0aGlzLmVuZW15c1xuICAgICAgICBsZXQgb3B0cyA9IHRoaXMub3B0c1xuICAgICAgICBsZXQgcGFkZGluZyA9IG9wdHMuY2FudmFzUGFkZGluZ1xuICAgICAgICBsZXQgZW5lbXlNYXhYID0gY2FudmFzV2lkdGggLSBwYWRkaW5nIC0gb3B0cy5lbmVteVNpemVcbiAgICAgICAgLy8g6I635Y+WeOeahOacgOWAvFxuICAgICAgICBsZXQgbW9zdFggPSBnZXRNb3N0WChlbmVteXMpXG4gICAgICAgIC8vIOaYr+WQpumcgOimgeWQkeS4i1xuICAgICAgICBsZXQgaGFzRG93biA9IGZhbHNlXG5cbiAgICAgICAgLy8g5Yik5pat5piv5ZCm56Kw5aOBXG4gICAgICAgIGlmIChtb3N0WC5taW4gPCBwYWRkaW5nIHx8IG1vc3RYLm1heCA+IGVuZW15TWF4WCkge1xuICAgICAgICAgICAgLy8g5pS55Y+Y5pa55ZCRXG4gICAgICAgICAgICBvcHRzLmVuZW15RGlyZWN0aW9uID1cbiAgICAgICAgICAgICAgICBvcHRzLmVuZW15RGlyZWN0aW9uID09PSAnbGVmdCcgPyAncmlnaHQnIDogJ2xlZnQnXG4gICAgICAgICAgICBoYXNEb3duID0gdHJ1ZVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IGVuZW15cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgbGV0IGVuZW15ID0gZW5lbXlzW2ldXG4gICAgICAgICAgICAvLyDlkJHkuIvnp7vliqhcbiAgICAgICAgICAgIGlmIChoYXNEb3duKSB7XG4gICAgICAgICAgICAgICAgZW5lbXkuZG93bigpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOW3puWPs+enu+WKqFxuICAgICAgICAgICAgZW5lbXkudHJhbnNsYXRlKG9wdHMuZW5lbXlEaXJlY3Rpb24pXG5cbiAgICAgICAgICAgIC8vIOWIpOaWreaVjOS6uueahOS4jeWQjOeKtuaAgVxuICAgICAgICAgICAgc3dpdGNoIChlbmVteS5zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdub3JtYWwnOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wbGFuZS5oYXNIaXQoZW5lbXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmVteS5ib29taW5nKClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ2Jvb21pbmcnOlxuICAgICAgICAgICAgICAgICAgICBlbmVteS5ib29taW5nKClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdkaWVkJzpcbiAgICAgICAgICAgICAgICAgICAgZW5lbXlzLnNwbGljZShpLCAxKVxuICAgICAgICAgICAgICAgICAgICAvLyDmlYzkurrmrbvkuqEsIOW+l+WIhisxXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NvcmUgKz0gMVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIOe7mOWItlxuICAgICAqL1xuICAgIGRyYXc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyDnu5jliLbmlYzkurpcbiAgICAgICAgdGhpcy5lbmVteXMuZm9yRWFjaChmdW5jdGlvbihlbmVteSkge1xuICAgICAgICAgICAgZW5lbXkuZHJhdygpXG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8g57uY5Yi25oiR55qE6aOe5py6XG4gICAgICAgIHRoaXMucGxhbmUuZHJhdygpXG5cbiAgICAgICAgLy8g57uY5Yi25b6X5YiGXG4gICAgfSxcbiAgICAvKipcbiAgICAgKiDnu5PmnZ/mlrnlvI/mnInkuInnp41cbiAgICAgKiBmYWlsZWQg5aSx6LSlXG4gICAgICogc3VjY2VzcyDov4flhbNcbiAgICAgKiBhbGwtc3VjY2VzcyDlhajpg6jpgJrlhbNcbiAgICAgKi9cbiAgICBlbmQ6IGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdmYWlsZWQnOlxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdHVzKCdmYWlsZWQnKVxuICAgICAgICAgICAgICAgIHNjb3JlVGV4dC5pbm5lckhUTUwgPSBgJHt0aGlzLnNjb3JlfWBcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnc3VjY2Vzcyc6XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0dXMoJ3N1Y2Nlc3MnKVxuICAgICAgICAgICAgICAgIG5leHRMZXZlbFRleHQuaW5uZXJIVE1MID0gYOS4i+S4gOS4qkxldmVs77yaICR7dGhpcy5vcHRzLmxldmVsICsgMX1gXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgJ2FsbC1zdWNjZXNzJzpcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXR1cygnYWxsLXN1Y2Nlc3MnKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICB9XG59XG4vLyDliJ3lp4vljJZcbkdBTUUuaW5pdCgpXG4iLCIvKipcbiAqIOmUruebmOaTjeS9nOexu1xuICovXG5leHBvcnQgY2xhc3MgS2V5Ym9hcmQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmtleWRvd24oZXZlbnQpXG4gICAgICAgIH0pXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmtleXVwKGV2ZW50KVxuICAgICAgICB9KVxuICAgICAgICB0aGlzLnByZXNzTGVmdCA9IGZhbHNlXG4gICAgICAgIHRoaXMucHJlc3NSaWdodCA9IGZhbHNlXG4gICAgICAgIHRoaXMucHJlc3NTcGFjZSA9IGZhbHNlXG4gICAgfVxuICAgIC8qKlxuICAgICAqIOaMieS4i1xuICAgICAqIEBwYXJhbSB7Kn0gZXZlbnRcbiAgICAgKi9cbiAgICBrZXlkb3duKGV2ZW50KSB7XG4gICAgICAgIGxldCBrZXkgPSBldmVudC5rZXlDb2RlXG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICAgICAgICBjYXNlIDM3OlxuICAgICAgICAgICAgICAgIHRoaXMucHJlc3NMZWZ0ID0gdHJ1ZVxuICAgICAgICAgICAgICAgIHRoaXMucHJlc3NSaWdodCA9IGZhbHNlXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgMzk6XG4gICAgICAgICAgICAgICAgdGhpcy5wcmVzc1JpZ2h0ID0gdHJ1ZVxuICAgICAgICAgICAgICAgIHRoaXMucHJlc3NMZWZ0ID0gZmFsc2VcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAzMjpcbiAgICAgICAgICAgICAgICB0aGlzLnByZXNzU3BhY2UgPSB0cnVlXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICog5p2+5byAXG4gICAgICogQHBhcmFtIHt9IGV2ZW50XG4gICAgICovXG4gICAga2V5dXAoZXZlbnQpIHtcbiAgICAgICAgbGV0IGtleSA9IGV2ZW50LmtleUNvZGVcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgIGNhc2UgMzc6XG4gICAgICAgICAgICAgICAgdGhpcy5wcmVzc0xlZnQgPSBmYWxzZVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIDM5OlxuICAgICAgICAgICAgICAgIHRoaXMucHJlc3NSaWdodCA9IGZhbHNlXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgMzI6XG4gICAgICAgICAgICAgICAgdGhpcy5wcmVzc1NwYWNlID0gZmFsc2VcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuL2VsZW1lbnQuanMnXG5pbXBvcnQgeyBCdWxsZXQgfSBmcm9tICcuL0J1bGxldC5qcydcbmltcG9ydCB7IGNvbnRleHQgfSBmcm9tICcuL2FwcC5qcydcblxuLyoqXG4gKiDpo57mnLrnsbtcbiAqL1xuZXhwb3J0IGNsYXNzIFBsYW5lIGV4dGVuZHMgRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3Iob3B0cykge1xuICAgICAgICBzdXBlcihvcHRzKVxuICAgICAgICAvLyDpo57mnLrlsZ7mgKdcbiAgICAgICAgdGhpcy5pY29uID0gb3B0cy5pY29uXG4gICAgICAgIHRoaXMubWluWCA9IG9wdHMubWluWFxuICAgICAgICB0aGlzLm1heFggPSBvcHRzLm1heFhcblxuICAgICAgICAvLyDlrZDlvLnlsZ7mgKdcbiAgICAgICAgdGhpcy5idWxsZXRzID0gW11cbiAgICAgICAgdGhpcy5idWxsZXRTaXplID0gb3B0cy5idWxsZXRTaXplXG4gICAgICAgIHRoaXMuYnVsbGV0U3BlZWQgPSBvcHRzLmJ1bGxldFNwZWVkXG4gICAgICAgIC8vIOaOp+WItuWtkOW8uemikeeOh1xuICAgICAgICB0aGlzLmxhc3RTaG9vdCA9IERhdGUubm93KClcbiAgICB9XG4gICAgLyoqXG4gICAgICog5bCE5Ye7XG4gICAgICog5Yib5bu65a2Q5by5XG4gICAgICovXG4gICAgc2hvb3QoKSB7XG4gICAgICAgIC8vIDIwMOavq+enkiDlsITlh7vkuIDmrKFcbiAgICAgICAgaWYgKERhdGUubm93KCkgLSB0aGlzLmxhc3RTaG9vdCA+IDIwMCkge1xuICAgICAgICAgICAgbGV0IGJ1bGxldE9wdHMgPSB7XG4gICAgICAgICAgICAgICAgeDogdGhpcy54ICsgdGhpcy5zaXplLndpZHRoIC8gMixcbiAgICAgICAgICAgICAgICB5OiB0aGlzLnksXG4gICAgICAgICAgICAgICAgc2l6ZTogdGhpcy5idWxsZXRTaXplLFxuICAgICAgICAgICAgICAgIHNwZWVkOiB0aGlzLmJ1bGxldFNwZWVkXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmJ1bGxldHMucHVzaChuZXcgQnVsbGV0KGJ1bGxldE9wdHMpKVxuICAgICAgICAgICAgdGhpcy5sYXN0U2hvb3QgPSBuZXcgRGF0ZSgpXG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICog56e75YqoXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGRpcmVjdGlvbiDmlrnlkJFcbiAgICAgKi9cbiAgICB0cmFuc2xhdGUoZGlyZWN0aW9uKSB7XG4gICAgICAgIGxldCBzcGVlZCA9IGRpcmVjdGlvbiA9PT0gJ2xlZnQnID8gLXRoaXMuc3BlZWQgOiB0aGlzLnNwZWVkXG4gICAgICAgIHRoaXMubW92ZShzcGVlZCwgMClcbiAgICB9XG4gICAgLyoqXG4gICAgICog5Yik5patIOaJgOacieWtkOW8uSDkuK3mmK/lkKbmnInlh7vkuK3kvKDov5vmnaXnmoTmlYzkurpcbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gaGFzSGl0XG4gICAgICovXG4gICAgaGFzSGl0KGVuZW15KSB7XG4gICAgICAgIGxldCBoYXNIaXQgPSBmYWxzZVxuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5idWxsZXRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBsZXQgYnVsbGV0ID0gdGhpcy5idWxsZXRzW2ldXG4gICAgICAgICAgICBpZiAoYnVsbGV0LmNyYXNoKGVuZW15KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYnVsbGV0cy5zcGxpY2UoaSwgMSlcbiAgICAgICAgICAgICAgICBoYXNIaXQgPSB0cnVlXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGFzSGl0XG4gICAgfVxuICAgIC8qKlxuICAgICAqIOe7mOWItizmm7TmlrDlrZDlvLlcbiAgICAgKi9cbiAgICBkcmF3QnVsbGV0cygpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuYnVsbGV0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgbGV0IGJ1bGxldCA9IHRoaXMuYnVsbGV0c1tpXVxuICAgICAgICAgICAgYnVsbGV0LnVwKClcbiAgICAgICAgICAgIGlmIChidWxsZXQueSA8PSAwIC0gYnVsbGV0LnNpemUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJ1bGxldHMuc3BsaWNlKGksIDEpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJ1bGxldC5kcmF3KClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiDnu5jliLZcbiAgICAgKi9cbiAgICBkcmF3KCkge1xuICAgICAgICBjb250ZXh0LmRyYXdJbWFnZShcbiAgICAgICAgICAgIHRoaXMuaWNvbixcbiAgICAgICAgICAgIHRoaXMueCxcbiAgICAgICAgICAgIHRoaXMueSxcbiAgICAgICAgICAgIHRoaXMuc2l6ZS53aWR0aCxcbiAgICAgICAgICAgIHRoaXMuc2l6ZS5oZWlnaHRcbiAgICAgICAgKVxuICAgICAgICB0aGlzLmRyYXdCdWxsZXRzKClcbiAgICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9